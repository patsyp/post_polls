<div ng-init='UC.session()'>
	<a href="" ng-click = 'UC.logout()'>Logout</a>
	<a href="#!/dashboard">Go to Polls</a>

</div>
<div ng-controller='QuestionsController as QC' ng-init = 'QC.show()'>
	
	<h2>{{QC.question.question}}</h2>
	<h3>Click the vote button to choose one.</h3>
	<table border = '1'>
		<thead>
			<tr>
				<th>Option</th>
				<th>Current Count of Votes</th>
				<th>Action</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>{{QC.question.optionOne.name}}</td>
				<td>{{QC.question.optionOne.votes.count}}</td>
				<td><button ng-if='QC.question.optionOne.votes.users.indexOf(UC.current_user._id) == -1' ng-click='QC.updateOptionOne(QC.question._id, UC.current_user._id)'>VOTE</button></td>
			</tr>
			<tr>
				<td>{{QC.question.optionTwo.name}}</td>
				<td>{{QC.question.optionTwo.votes.count}}</td>
				<td><button ng-if='QC.question.optionTwo.votes.users.indexOf(UC.current_user._id) == -1' ng-click='QC.updateOptionTwo(QC.question._id, UC.current_user._id)'>VOTE</button></td>
			</tr>
			<tr>
				<td>{{QC.question.optionThree.name}}</td>
				<td>{{QC.question.optionThree.votes.count}}</td>
				<td><button ng-if='QC.question.optionThree.votes.users.indexOf(UC.current_user._id) == -1' ng-click='QC.updateOptionThree(QC.question._id, UC.current_user._id)'>VOTE</button></td>
			</tr>
			<tr>
				<td>{{QC.question.optionFour.name}}</td>
				<td>{{QC.question.optionFour.votes.count}}</td>
				<td><button ng-if='QC.question.optionFour.votes.users.indexOf(UC.current_user._id) == -1' ng-click='QC.updateOptionFour(QC.question._id, UC.current_user._id)'>VOTE</button></td>
			</tr>
		</tbody>
	</table>
</div>